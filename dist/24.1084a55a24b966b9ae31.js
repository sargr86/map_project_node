(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{LMli:function(e,t){e.exports={url:"http://myworks.site/dev/secret_south/api",imgPath:"http://myworks.site/dev/secret_south/"}},jkDv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return A}));var r=n("Valr"),o=n("DUip"),i=function(){function e(){}return e.load=function(){var e=this;return this.promise||(this.promise=new Promise((function(t){e.loadScript("https://maps.googleapis.com/maps/api/js?libraries=geometry,drawing&key=AIzaSyCgUl40xKEjDAAJNWZHMZqWajSOd25yJOs&callback=__onGoogleLoaded"),window.__onGoogleLoaded=function(e){t("google maps api loaded")}}))),this.promise},e.loadScript=function(e,t){var n,r,o;r=!1,(n=document.createElement("script")).type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(){r||this.readyState&&"complete"!=this.readyState||(r=!0,"function"==typeof t&&t())},(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,o)},e}(),a=n("Gv2p"),s=n("LMli"),l=n("TYT/"),d=n("cUzu"),c=function(){function e(e){this.http=e}return e.prototype.saveLocate=function(e){return this.http.post(s.url+"/saveDrawing",e)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](d.b))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),u=n("2rqX"),p=n("drFA"),m=n("eHTH"),h=n("agxM"),f=n("MqYC"),g=n("QJY3"),y=n("p+mS");function v(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-option",3),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275property"]("value",n.id),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.name," ")}}var w=function(){function e(e,t,n,r){this.ferry=e,this.router=t,this.gpsServises=n,this.mapsAPILoader=r,this.ferryName=[],this.ferryName2=[],this.partner={partner_id:""},this.drawing={drawingLatLng:[],markerLatLng:[]},this.mapStyles=u}return e.prototype.ngOnInit=function(){this.getferry()},e.prototype.getferry=function(){var e=this;this.ferry.getFerries({}).subscribe((function(t){if(0==t.status)return alert(t.message),alert(t.message),!1;t.result&&(t.result.map((function(t){return e.ferryName.push(t)})),t.result.map((function(t){return e.ferryName2.push(t)})))}))},e.prototype.filterferryBus=function(e){var t=e.value;this.ferryName=this.ferryName2,this.ferryName=this.ferryName.filter((function(e){return e.type==t}))},e.prototype.setPartner=function(){var e=this;i.load().then((function(){e.drawPolygon()}))},e.prototype.saveRoad=function(){var e=this;this.drawing.ferry_id=this.partner.partner_id,console.log(this.drawing),this.gpsServises.saveLocate(this.drawing).subscribe((function(t){if(0==t.status)return alert(t.message),!1;e.router.navigate(["admin/dashboard/show"])}))},e.prototype.drawPolygon=function(){var e=this;this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:52.8757843,lng:-7.3217572},zoom:8,styles:this.mapStyles,fullscreenControl:!1,mapTypeId:"terrain",mapTypeControl:!1,icon:"https://image.flaticon.com/icons/png/128/0/300.png"}),this.drawingManager=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.POLYLINE,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.MARKER]},polylineOptions:{strokeColor:"#FF0000"}}),this.drawingManager.setMap(this.map),google.maps.event.addListener(this.drawingManager,"polylinecomplete",(function(t){t.getPath().getArray().map((function(t){e.drawing.drawingLatLng.push({lat:t.lat(),lng:t.lng()})}))})),google.maps.event.addListener(this.drawingManager,"markercomplete",(function(t){e.drawing.markerLatLng.push({lat:t.getPosition().lat(),lng:t.getPosition().lng()})}))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.d),l["\u0275\u0275directiveInject"](c),l["\u0275\u0275directiveInject"](p.j))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-gps-location"]],decls:20,vars:4,consts:[[1,"rightGroup"],[1,"example-full-width"],["placeholder","Ferry or Bus",3,"selectionChange"],[3,"value"],["placeholder","Ferry/Bus","name","tours_type_id",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["id","map"],[1,"form-group"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275elementStart"](2,"mat-form-field",1),l["\u0275\u0275elementStart"](3,"mat-select",2),l["\u0275\u0275listener"]("selectionChange",(function(e){return t.filterferryBus(e)})),l["\u0275\u0275elementStart"](4,"mat-option"),l["\u0275\u0275text"](5,"Please choose"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"mat-option",3),l["\u0275\u0275text"](7,"Ferry"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"mat-option",3),l["\u0275\u0275text"](9,"Bus"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div"),l["\u0275\u0275elementStart"](11,"mat-form-field",1),l["\u0275\u0275elementStart"](12,"mat-select",4),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.partner.partner_id=e}))("selectionChange",(function(){return t.setPartner()})),l["\u0275\u0275elementStart"](13,"mat-option"),l["\u0275\u0275text"](14,"Please choose"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](15,v,2,2,"mat-option",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](16,"div",6),l["\u0275\u0275elementStart"](17,"div",7),l["\u0275\u0275elementStart"](18,"button",8),l["\u0275\u0275listener"]("click",(function(){return t.saveRoad()})),l["\u0275\u0275text"](19,"Save"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("value",1),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("value",2),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",t.partner.partner_id),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",t.ferryName))},directives:[m.b,h.a,f.n,g.o,g.r,r.k,y.b],styles:["#map[_ngcontent-%COMP%]{height:500px;width:100%;margin-bottom:50px}.rightGroup[_ngcontent-%COMP%]{overflow:hidden;max-width:600px;width:100%;margin-left:270px}@media (max-width:767px){.rightGroup[_ngcontent-%COMP%]{width:100%;display:block;padding-left:20px;padding-right:20px;margin:0}}"]}),e}(),b=n("DYpl"),M=n("nPaU"),C=n("oUVn"),S=n("Sw3e"),P=n("qT8p"),E=function(){function e(e,t,n){this.common=e,this.toastr=t,this.webSocketService=n}return e.prototype.ngOnInit=function(){var e=this;this.common.dataLoading=!1,this.webSocketService.on("orderCreated").subscribe((function(t){console.log(t);var n=t.order.client;n&&e.toastr.success("A new order has been created by: <strong>"+n.first_name+"  "+n.last_name+"</strong>","Order created!",{enableHtml:!0})}))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](C.a),l["\u0275\u0275directiveInject"](P.b),l["\u0275\u0275directiveInject"](S.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1," dashboard works!\n"),l["\u0275\u0275elementEnd"]())},styles:[""]}),e}(),k=n("NUQi"),x=[{path:"",redirectTo:"dashboard/show"},{path:"dashboard/show",component:E,data:{title:"Dashboard"}},{path:"dashboard/edit",component:b.a,data:{title:"Edit profile"},resolve:{user:M.a}},{path:"accommodations",loadChildren:function(){return n.e(9).then(n.bind(null,"EN+u")).then((function(e){return e.AccommodationModule}))}},{path:"activities",loadChildren:function(){return Promise.resolve().then(n.bind(null,"kQbx")).then((function(e){return e.ActivitiesModule}))}},{path:"food-drink",loadChildren:function(){return Promise.resolve().then(n.bind(null,"HqK/")).then((function(e){return e.FoodDrinkModule}))}},{path:"ferries",loadChildren:function(){return Promise.resolve().then(n.bind(null,"9h4u")).then((function(e){return e.FerriesModule}))}},{path:"tours",loadChildren:function(){return Promise.resolve().then(n.bind(null,"NyQy")).then((function(e){return e.ToursModule}))}},{path:"employees",canActivate:[k.a],loadChildren:function(){return n.e(1).then(n.bind(null,"Q21o")).then((function(e){return e.EmployeesModule}))}},{path:"customers",canActivate:[k.a],loadChildren:function(){return n.e(1).then(n.bind(null,"vfUp")).then((function(e){return e.CustomersModule}))}},{path:"partners",loadChildren:function(){return Promise.resolve().then(n.bind(null,"qHMa")).then((function(e){return e.PartnersModule}))}},{path:"contacts",loadChildren:function(){return n.e(26).then(n.bind(null,"1s7i")).then((function(e){return e.ContactsModule}))}},{path:"companies",loadChildren:function(){return n.e(25).then(n.bind(null,"Nt43")).then((function(e){return e.CompaniesModule}))}},{path:"jobs",loadChildren:function(){return n.e(1).then(n.bind(null,"vTna")).then((function(e){return e.JobsModule}))}},{path:"add_locations",component:w,data:{title:"Add GPS locations"}}],N=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.e.forChild(x)],o.e]}),e}(),L=n("PCNd"),j=n("9h4u"),I=n("NyQy"),_=n("kQbx"),O=n("HqK/"),T=n("qHMa"),A=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,N,L.a,I.ToursModule,j.FerriesModule,_.ActivitiesModule,O.FoodDrinkModule,T.PartnersModule]]}),e}()}}]);